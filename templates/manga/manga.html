{% extends 'manga/manga-base.html' %}
{% import '_macros/widgets.html' as widgets with context %}

{% block title %}{{ manga.title }}{% endblock %}

{% block content %}
    <div class="manga-container">
        <div class="manga-controls">
            <select id="m-page-jump" class="right" data-bind="event: { change: jumpPage }, value: pageNum()">
                {% for i in range(1, manga.mangapage_set.count() + 1) %}
                    <option value="{{ i }}">{% trans %}Page {{ i }}{% endtrans %}</option>
                {% endfor %}
            </select>
            {% if chapter_list %}
                <select class="space-right-10 right m-chapter-jump" id="m-chapter-jump">
                    {% for manga_ in chapter_list %}
                        <option value="{{ url('manga', args=[manga_.id, manga_.slug]) }}"{% if manga_.id == manga.id %} selected{% endif %}>{% trans number=manga_.tank_chapter %}Chapter {{ number }}{% endtrans %}</option>
                    {% endfor %}
                </select>
            {% endif %}
            {% if collection_list %}
                <select class="space-right-10 right m-chapter-jump">
                    {% for manga_ in collection_list %}
                        <option value="{{ url('manga', args=[manga_.id, manga_.slug]) }}"{% if manga_.id == manga_.id %} selected{% endif %}>{% trans number=manga_.collection_part %}Part {{ number }}{% endtrans %}</option>
                    {% endfor %}
                </select>
            {% endif %}
            <div class="clear"></div>
        </div>
        <div class="manga-main" data-bind="css: { double: double() }">
            <a id="manga-prev-page" data-bind="attr: { href: prevUrl() }"></a>
            <a id="manga-next-page" data-bind="attr: { href: nextUrl() }"></a>
            <div data-bind="html: image()"></div>
        </div>
    </div>
    <div id="payload">{{ payload }}</div>
{% endblock %}
