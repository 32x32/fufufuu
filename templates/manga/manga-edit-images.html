{% extends 'manga/manga-base.html' %}
{% import '_macros/forms.html' as forms with context %}

{% block title %}{% trans title=manga.title %}Edit Images: {{ title }}{% endtrans %}{% endblock %}

{% block content %}
    <div class="container-fat relative">
        {% if formset|length > 1 %}
            <form action="" method="post" enctype="multipart/form-data">
                <div class="manga-edit-main space-bottom-15">
                    <ul class="upload-pl">
                        {{ forms.csrf_token(csrf_token) }}
                        {{ formset.management_form }}
                        {% for form in formset %}{% with page=form.instance %}
                            <li class="upload-pli">
                                <div class="upload-pli-inner">
                                    {{ form.id }}
                                    <div class="upload-pli-image-wrapper">
                                        <img class="lazy-image" src="{{ STATIC_URL }}images/loading.png" data-src="{{ page.image.url }}">
                                    </div>
                                    <div class="upload-pli-info">
                                        <label class="right">{{ form.select }}</label>
                                        {{ form.ORDER }}
                                        <a href="{{ page.image.url }}" target="_blank" class="upload-pli-link"{% if page.name %} title="{{ page.name }}"{% endif %}>{% if page.name %}{{ page.name }}{% else %}{{ page.page }}{% endif %}</a>
                                    </div>
                                </div>
                            </li>
                        {% endwith %}{% endfor %}
                    </ul>
                </div>
                <div class="manga-edit-sidebar">
                    <div class="well space-bottom-15">
                        <button class="btn btn-primary">{% trans %}Save Image Order{% endtrans %}</button>
                        <button class="btn btn-error">{% trans %}Delete Selected{% endtrans %}</button>
                    </div>
                    <p class="help-block">{% trans %}Images can be re-ordered by dragging and dropping. Remember to save after re-ordering images.{% endtrans %}</p>
                </div>
            </form>
            <hr class="min-lg">
        {% endif %}
        <form action="{{ url('manga.edit.upload', args=[manga.id, manga.slug]) }}" method="post" enctype="multipart/form-data" class="half-wrapper">
            <div class="half half-sm">
                <div class="panel panel">
                    {{ forms.csrf_token(csrf_token) }}
                    <h5 class="panel-heading">{% trans %}Upload a Zip File{% endtrans %}</h5>
                    <div class="panel-body">
                        <input type="file" name="zipfile" id="id_zipfile">
                        <p class="help-block space-top-10 space-bottom-0">{% trans %}Maximum file size: 50MB{% endtrans %}</p>
                        <p class="help-block">&nbsp;</p>
                    </div>
                </div>
            </div>
            <div class="half half-sm">
                <div class="panel">
                    {{ forms.csrf_token(csrf_token) }}
                    <h5 class="panel-heading">{% trans %}Upload Image Files{% endtrans %}</h5>
                    <div class="panel-body">
                        <input type="file" multiple="multiple" name="images" id="id_images">
                        <p class="help-block space-top-10 space-bottom-0">{% trans %}Note: hold ctrl/shift (command for Mac) to select multiple files{% endtrans %}</p>
                        <p class="help-block">{% trans %}Maximum total size: 50MB{% endtrans %}</p>
                    </div>
                </div>
            </div>
        </form>
        <div class="panel">
            <h5 class="panel-heading">{% trans %}Getting Started with Uploading{% endtrans %}</h5>
            <div class="panel-body">
                <p>{% trans %}Please remember to check that you are not violiating any rules or uploading a duplicate.{% endtrans %}</p>
                <h4 class="space-bottom-10">{% trans %}Upload Rules{% endtrans %}</h4>
                <p class="space-bottom-10">{% trans %}The following content should <strong>NOT</strong> be uploaded to Fufufuu:{% endtrans %}</p>
                <ul class="bullet-list">
                    <li>{% trans %}Loli and Shota{% endtrans %}</li>
                    <li>{% trans %}Scat{% endtrans %}</li>
                    <li>{% trans %}Western comics{% endtrans %}</li>
                </ul>
                <h4 class="space-bottom-10">{% trans %}Upload Guidelines{% endtrans %}</h4>
                <ul class="bullet-list">
                    <li>{% trans %}There is a hard limit of 100 images per upload{% endtrans %}</li>
                    <li>{% trans %}There is a hard limit of 200 MB per upload{% endtrans %}</li>
                    <li>{% trans %}Each image file must to be smaller than 8000x8000 pixels{% endtrans %}</li>
                    <li>{% trans %}Each image file must to be smaller than 8MB{% endtrans %}</li>
                    <li>{% trans %}Each image file must be in either JPG or PNG format{% endtrans %} </li>
                    <li>{% trans %}Please only upload Japanese manga/doujinshi, no Western comics allowed!{% endtrans %}</li>
                </ul>
            </div>
        </div>
    </div>
{% endblock %}
