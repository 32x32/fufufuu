{% import '_macros/utils.html' as utils with context %}

{% set url_account_login = url('account.login') %}
{% set url_account_register = url('account.register') %}
{% set url_account_settings = url('account.settings') %}
{% set url_flat_help = url('flat.help') %}
{% set url_manga_list = url('manga.list') %}
{% set url_manga_list_favorites = url('manga.list.favorites') %}
{% set url_tag_list_grid_collection = url('tag.list.grid.collection') %}
{% set url_tag_list_grid_tank = url('tag.list.grid.tank') %}
{% set url_tag_list_author = url('tag.list.author') %}
{% set url_tag_list_circle = url('tag.list.circle') %}
{% set url_tag_list_content = url('tag.list.content') %}
{% set url_tag_list_event = url('tag.list.event') %}
{% set url_tag_list_magazine = url('tag.list.magazine') %}
{% set url_tag_list_parody = url('tag.list.parody') %}
{% set url_tag_list_scanlator = url('tag.list.scanlator') %}
{% set url_upload_list = url('upload.list') %}

<nav>
    <a href="{{ url_manga_list }}" class="nav-link {{ utils.link_active(url_manga_list) }}"><span class="icon icon-clock"></span>{% trans %}Latest{% endtrans %}</a>
    <a href="{{ url_manga_list_favorites }}" class="nav-link {{ utils.link_active(url_manga_list_favorites) }}"><span class="icon icon-heart"></span>{% trans %}Favorites{% endtrans %}</a>
    <hr class="nav-sep">
    <a href="{{ url_tag_list_grid_tank }}" class="nav-link {{ utils.link_active_starts_with(url_tag_list_grid_tank) }}"><span class="icon icon-docs"></span>{% trans %}Tanks{% endtrans %}</a>
{#    <a href="{{ url_tag_list_grid_collection }}" class="nav-link {{ utils.link_active_starts_with(url_tag_list_grid_collection) }}"><span class="icon icon-docs"></span>{% trans %}Collections{% endtrans %}</a>#}
    <hr class="nav-sep">
    <a href="{{ url_tag_list_author }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_author) }}"><span class="icon icon-tag"></span>{% trans %}Authors{% endtrans %}</a>
    <a href="{{ url_tag_list_circle }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_circle) }}"><span class="icon icon-tag"></span>{% trans %}Circles{% endtrans %}</a>
{#    <a href="{{ url_tag_list_content }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_content) }}"><span class="icon icon-tag"></span>{% trans %}Content{% endtrans %}</a>#}
{#    <a href="{{ url_tag_list_event }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_event) }}"><span class="icon icon-tag"></span>{% trans %}Events{% endtrans %}</a>#}
{#    <a href="{{ url_tag_list_magazine }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_magazine) }}"><span class="icon icon-tag"></span>{% trans %}Magazines{% endtrans %}</a>#}
    <a href="{{ url_tag_list_parody }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_parody) }}"><span class="icon icon-tag"></span>{% trans %}Parodies{% endtrans %}</a>
    <a href="{{ url_tag_list_scanlator }}{% if request.lang %}lang={{ request.lang }}{% endif %}" class="nav-link {{ utils.link_active(url_tag_list_scanlator) }}"><span class="icon icon-tag"></span>{% trans %}Scanlators{% endtrans %}</a>
    <hr class="nav-sep max-xs">
    {% if user.is_authenticated() %}
        <a href="{{ url_account_settings }}" class="max-xs nav-link {{ utils.link_active_starts_with(url_account_settings) }}"><span class="icon icon-cog"></span>{{ user.username }}</a>
        <a href="#" class="max-xs nav-link" onclick="document.getElementById('account-logout-form').submit()"><span class="icon icon-logout"></span>{% trans %}Logout{% endtrans %}</a>
    {% else %}
        <a href="{{ url_account_login }}" class="max-xs nav-link {{ utils.link_active(url_account_login) }}"><span class="icon icon-key"></span>{% trans %}Login{% endtrans %}</a>
        <a href="{{ url_account_register }}" class="max-xs nav-link {{ utils.link_active(url_account_register) }}"><span class="icon icon-user-add"></span>{% trans %}Create Account{% endtrans %}</a>
    {% endif %}
    <hr class="nav-sep">
    {% if user.is_moderator %}
        <a href="{{ url('moderator.report.manga.list') }}" class="nav-link min-md"><span class="icon icon-tools"></span>{% trans %}Mod Tools{% endtrans %}</a>
    {% endif %}
    {% if user.is_staff %}
        <a href="{{ url('staff.site.metrics') }}" class="nav-link min-md"><span class="icon icon-tools"></span>{% trans %}Staff Tools{% endtrans %}</a>
    {% endif %}
    {% if user.is_moderator or user.is_staff %}
        <hr class="nav-sep">
    {% endif %}
    <a href="#" class="nav-link"><span class="icon icon-newspaper"></span>{% trans %}News & Blog{% endtrans %}</a>
    <a href="{{ url_flat_help }}" class="nav-link {{ utils.link_active_starts_with(url_flat_help) }}"><span class="icon icon-help-circled"></span>{% trans %}Help{% endtrans %}</a>
</nav>
